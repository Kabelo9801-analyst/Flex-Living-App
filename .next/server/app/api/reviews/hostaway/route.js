"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/reviews/hostaway/route";
exports.ids = ["app/api/reviews/hostaway/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freviews%2Fhostaway%2Froute&page=%2Fapi%2Freviews%2Fhostaway%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freviews%2Fhostaway%2Froute.ts&appDir=%2FUsers%2Fkvbiila%2FDownloads%2Fflex-living-reviews-dashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkvbiila%2FDownloads%2Fflex-living-reviews-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freviews%2Fhostaway%2Froute&page=%2Fapi%2Freviews%2Fhostaway%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freviews%2Fhostaway%2Froute.ts&appDir=%2FUsers%2Fkvbiila%2FDownloads%2Fflex-living-reviews-dashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkvbiila%2FDownloads%2Fflex-living-reviews-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_kvbiila_Downloads_flex_living_reviews_dashboard_app_api_reviews_hostaway_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/reviews/hostaway/route.ts */ \"(rsc)/./app/api/reviews/hostaway/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/reviews/hostaway/route\",\n        pathname: \"/api/reviews/hostaway\",\n        filename: \"route\",\n        bundlePath: \"app/api/reviews/hostaway/route\"\n    },\n    resolvedPagePath: \"/Users/kvbiila/Downloads/flex-living-reviews-dashboard/app/api/reviews/hostaway/route.ts\",\n    nextConfigOutput,\n    userland: _Users_kvbiila_Downloads_flex_living_reviews_dashboard_app_api_reviews_hostaway_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/reviews/hostaway/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyZXZpZXdzJTJGaG9zdGF3YXklMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJldmlld3MlMkZob3N0YXdheSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJldmlld3MlMkZob3N0YXdheSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmt2YmlpbGElMkZEb3dubG9hZHMlMkZmbGV4LWxpdmluZy1yZXZpZXdzLWRhc2hib2FyZCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZrdmJpaWxhJTJGRG93bmxvYWRzJTJGZmxleC1saXZpbmctcmV2aWV3cy1kYXNoYm9hcmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3dDO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxleC1saXZpbmctcmV2aWV3cy1kYXNoYm9hcmQvP2JkODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2t2YmlpbGEvRG93bmxvYWRzL2ZsZXgtbGl2aW5nLXJldmlld3MtZGFzaGJvYXJkL2FwcC9hcGkvcmV2aWV3cy9ob3N0YXdheS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcmV2aWV3cy9ob3N0YXdheS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Jldmlld3MvaG9zdGF3YXlcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Jldmlld3MvaG9zdGF3YXkvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMva3ZiaWlsYS9Eb3dubG9hZHMvZmxleC1saXZpbmctcmV2aWV3cy1kYXNoYm9hcmQvYXBwL2FwaS9yZXZpZXdzL2hvc3Rhd2F5L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9yZXZpZXdzL2hvc3Rhd2F5L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freviews%2Fhostaway%2Froute&page=%2Fapi%2Freviews%2Fhostaway%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freviews%2Fhostaway%2Froute.ts&appDir=%2FUsers%2Fkvbiila%2FDownloads%2Fflex-living-reviews-dashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkvbiila%2FDownloads%2Fflex-living-reviews-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/reviews/hostaway/route.ts":
/*!*******************************************!*\
  !*** ./app/api/reviews/hostaway/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_normalize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/normalize */ \"(rsc)/./lib/normalize.ts\");\n/* harmony import */ var _upstash_redis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @upstash/redis */ \"(rsc)/./node_modules/@upstash/redis/nodejs.mjs\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nconst redis = new _upstash_redis__WEBPACK_IMPORTED_MODULE_2__.Redis({\n    url: process.env.UPSTASH_REDIS_REST_URL,\n    token: process.env.UPSTASH_REDIS_REST_TOKEN\n});\n// âœ… load approved reviews from Redis\nasync function loadApproved() {\n    const keys = await redis.keys(\"*\");\n    const entries = await Promise.all(keys.map(async (key)=>[\n            key,\n            await redis.get(key)\n        ]));\n    return Object.fromEntries(entries);\n}\nconst HOSTAWAY_BASE = \"https://api.hostaway.com/v1\";\nasync function getAccessToken() {\n    const id = process.env.HOSTAWAY_ACCOUNT_ID;\n    const key = process.env.HOSTAWAY_API_KEY;\n    if (!id || !key) return null;\n    try {\n        const body = new URLSearchParams({\n            grant_type: \"client_credentials\",\n            client_id: id,\n            client_secret: key,\n            scope: \"general\"\n        });\n        const r = await fetch(`${HOSTAWAY_BASE}/accessTokens`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n            },\n            body\n        });\n        if (!r.ok) throw new Error(`Token error: ${r.status}`);\n        const j = await r.json();\n        return j?.access_token || null;\n    } catch  {\n        return null;\n    }\n}\nasync function fetchHostawayReviews(token, searchParams) {\n    if (!token) return {\n        status: \"fail\",\n        result: []\n    };\n    const url = new URL(`${HOSTAWAY_BASE}/reviews`);\n    for (const k of [\n        \"listingMapIds[]\",\n        \"limit\",\n        \"offset\",\n        \"sortBy\",\n        \"sortOrder\",\n        \"reservationId\",\n        \"type\",\n        \"statuses[]\",\n        \"from\",\n        \"to\"\n    ]){\n        if (searchParams.has(k)) url.searchParams.set(k, searchParams.get(k));\n    }\n    const r = await fetch(url.toString(), {\n        headers: {\n            Authorization: `Bearer ${token}`\n        }\n    });\n    if (!r.ok) return {\n        status: \"fail\",\n        result: []\n    };\n    return r.json();\n}\n// Load mock reviews (fallback if Hostaway returns nothing)\nasync function loadMock() {\n    try {\n        return JSON.parse(await node_fs_promises__WEBPACK_IMPORTED_MODULE_3___default().readFile(node_path__WEBPACK_IMPORTED_MODULE_4___default().join(process.cwd(), \"data\", \"mockReviews.json\"), \"utf-8\"));\n    } catch  {\n        return [];\n    }\n}\nasync function GET(req) {\n    const { searchParams } = new URL(req.url);\n    const token = await getAccessToken();\n    const api = await fetchHostawayReviews(token, searchParams).catch(()=>({\n            status: \"fail\",\n            result: []\n        }));\n    const hostawayItems = Array.isArray(api?.result) ? api.result : [];\n    const mocked = await loadMock();\n    const items = hostawayItems.length ? hostawayItems : mocked;\n    const approvedMap = await loadApproved();\n    let normalized = items.map((r)=>(0,_lib_normalize__WEBPACK_IMPORTED_MODULE_1__.normalizeHostawayReview)(r, approvedMap));\n    const listingIdParam = searchParams.get(\"listingId\");\n    const channel = searchParams.get(\"channel\");\n    const type = searchParams.get(\"type\");\n    const status = searchParams.get(\"status\");\n    const from = searchParams.get(\"from\") ? new Date(searchParams.get(\"from\")) : null;\n    const to = searchParams.get(\"to\") ? new Date(searchParams.get(\"to\")) : null;\n    const q = searchParams.get(\"q\")?.toLowerCase();\n    if (listingIdParam) normalized = normalized.filter((r)=>String(r.listingId) === String(listingIdParam));\n    if (channel) normalized = normalized.filter((r)=>r.channel.toLowerCase() === channel.toLowerCase());\n    if (type) normalized = normalized.filter((r)=>(r.reviewType || \"\").toLowerCase() === type.toLowerCase());\n    if (status) normalized = normalized.filter((r)=>(r.status || \"\").toLowerCase() === status.toLowerCase());\n    if (from) normalized = normalized.filter((r)=>new Date(r.publishedAt) >= from);\n    if (to) normalized = normalized.filter((r)=>new Date(r.publishedAt) <= to);\n    if (q) normalized = normalized.filter((r)=>(r.text || \"\").toLowerCase().includes(q));\n    const withSummary = searchParams.get(\"summary\") === \"1\";\n    const payload = withSummary ? {\n        reviews: normalized,\n        summary: (0,_lib_normalize__WEBPACK_IMPORTED_MODULE_1__.buildSummary)(normalized)\n    } : {\n        reviews: normalized\n    };\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(payload, {\n        headers: {\n            \"Cache-Control\": \"no-store\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxVQUFVLElBQUksRUFBQyxFQUFHSixXQUFXLE9BQU9MLEtBQUtLLFdBQVc7SUFDckcsSUFBSXRDLFFBQVE4QixhQUFhQSxXQUFXUyxNQUFNLENBQUM3QyxDQUFBQSxJQUFLLENBQUNBLEVBQUVNLE1BQU0sSUFBSSxFQUFDLEVBQUdzQyxXQUFXLE9BQU90QyxPQUFPc0MsV0FBVztJQUNyRyxJQUFJSixNQUFNSixhQUFhQSxXQUFXUyxNQUFNLENBQUM3QyxDQUFBQSxJQUFLLElBQUl5QyxLQUFLekMsRUFBRWlELFdBQVcsS0FBS1Q7SUFDekUsSUFBSUUsSUFBSU4sYUFBYUEsV0FBV1MsTUFBTSxDQUFDN0MsQ0FBQUEsSUFBSyxJQUFJeUMsS0FBS3pDLEVBQUVpRCxXQUFXLEtBQUtQO0lBQ3ZFLElBQUlDLEdBQUdQLGFBQWFBLFdBQVdTLE1BQU0sQ0FBQzdDLENBQUFBLElBQUssQ0FBQ0EsRUFBRWtELElBQUksSUFBSSxFQUFDLEVBQUdOLFdBQVcsR0FBR08sUUFBUSxDQUFDUjtJQUVqRixNQUFNUyxjQUFjekMsYUFBYXpCLEdBQUcsQ0FBQyxlQUFlO0lBQ3BELE1BQU1tRSxVQUFVRCxjQUNaO1FBQUVFLFNBQVNsQjtRQUFZbUIsU0FBU3ZGLDREQUFZQSxDQUFDb0U7SUFBWSxJQUN6RDtRQUFFa0IsU0FBU2xCO0lBQVc7SUFFMUIsT0FBT3RFLHFEQUFZQSxDQUFDMEMsSUFBSSxDQUFDNkMsU0FBUztRQUFFbEQsU0FBUztZQUFFLGlCQUFpQjtRQUFXO0lBQUU7QUFDL0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbGV4LWxpdmluZy1yZXZpZXdzLWRhc2hib2FyZC8uL2FwcC9hcGkvcmV2aWV3cy9ob3N0YXdheS9yb3V0ZS50cz9mZTAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IG5vcm1hbGl6ZUhvc3Rhd2F5UmV2aWV3LCBidWlsZFN1bW1hcnkgfSBmcm9tICdAL2xpYi9ub3JtYWxpemUnXG5pbXBvcnQgdHlwZSB7IE5vcm1hbGl6ZWRSZXZpZXcsIEhvc3Rhd2F5UmF3UmV2aWV3IH0gZnJvbSAnQC9saWIvdHlwZXMnXG5pbXBvcnQgeyBSZWRpcyB9IGZyb20gJ0B1cHN0YXNoL3JlZGlzJ1xuaW1wb3J0IGZzIGZyb20gJ25vZGU6ZnMvcHJvbWlzZXMnXG5pbXBvcnQgcGF0aCBmcm9tICdub2RlOnBhdGgnXG5cbmNvbnN0IHJlZGlzID0gbmV3IFJlZGlzKHtcbiAgdXJsOiBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVVJMISxcbiAgdG9rZW46IHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9UT0tFTiEsXG59KVxuXG4vLyDinIUgbG9hZCBhcHByb3ZlZCByZXZpZXdzIGZyb20gUmVkaXNcbmFzeW5jIGZ1bmN0aW9uIGxvYWRBcHByb3ZlZCgpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+PiB7XG4gIGNvbnN0IGtleXMgPSBhd2FpdCByZWRpcy5rZXlzKCcqJylcbiAgY29uc3QgZW50cmllcyA9IGF3YWl0IFByb21pc2UuYWxsKGtleXMubWFwKGFzeW5jIGtleSA9PiBba2V5LCBhd2FpdCByZWRpcy5nZXQ8Ym9vbGVhbj4oa2V5KV0pKVxuICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKGVudHJpZXMpXG59XG5cbmNvbnN0IEhPU1RBV0FZX0JBU0UgPSAnaHR0cHM6Ly9hcGkuaG9zdGF3YXkuY29tL3YxJ1xuXG5hc3luYyBmdW5jdGlvbiBnZXRBY2Nlc3NUb2tlbigpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgY29uc3QgaWQgPSBwcm9jZXNzLmVudi5IT1NUQVdBWV9BQ0NPVU5UX0lEXG4gIGNvbnN0IGtleSA9IHByb2Nlc3MuZW52LkhPU1RBV0FZX0FQSV9LRVlcbiAgaWYgKCFpZCB8fCAha2V5KSByZXR1cm4gbnVsbFxuXG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgZ3JhbnRfdHlwZTogJ2NsaWVudF9jcmVkZW50aWFscycsXG4gICAgICBjbGllbnRfaWQ6IGlkLFxuICAgICAgY2xpZW50X3NlY3JldDoga2V5LFxuICAgICAgc2NvcGU6ICdnZW5lcmFsJyxcbiAgICB9KVxuXG4gICAgY29uc3QgciA9IGF3YWl0IGZldGNoKGAke0hPU1RBV0FZX0JBU0V9L2FjY2Vzc1Rva2Vuc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSxcbiAgICAgIGJvZHksXG4gICAgfSlcblxuICAgIGlmICghci5vaykgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiBlcnJvcjogJHtyLnN0YXR1c31gKVxuICAgIGNvbnN0IGogPSBhd2FpdCByLmpzb24oKVxuICAgIHJldHVybiBqPy5hY2Nlc3NfdG9rZW4gfHwgbnVsbFxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoSG9zdGF3YXlSZXZpZXdzKHRva2VuOiBzdHJpbmcgfCBudWxsLCBzZWFyY2hQYXJhbXM6IFVSTFNlYXJjaFBhcmFtcykge1xuICBpZiAoIXRva2VuKSByZXR1cm4geyBzdGF0dXM6ICdmYWlsJywgcmVzdWx0OiBbXSB9XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwoYCR7SE9TVEFXQVlfQkFTRX0vcmV2aWV3c2ApXG4gIGZvciAoY29uc3QgayBvZiBbXG4gICAgJ2xpc3RpbmdNYXBJZHNbXScsXG4gICAgJ2xpbWl0JyxcbiAgICAnb2Zmc2V0JyxcbiAgICAnc29ydEJ5JyxcbiAgICAnc29ydE9yZGVyJyxcbiAgICAncmVzZXJ2YXRpb25JZCcsXG4gICAgJ3R5cGUnLFxuICAgICdzdGF0dXNlc1tdJyxcbiAgICAnZnJvbScsXG4gICAgJ3RvJyxcbiAgXSkge1xuICAgIGlmIChzZWFyY2hQYXJhbXMuaGFzKGspKSB1cmwuc2VhcmNoUGFyYW1zLnNldChrLCBzZWFyY2hQYXJhbXMuZ2V0KGspISlcbiAgfVxuICBjb25zdCByID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCksIHsgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9IH0pXG4gIGlmICghci5vaykgcmV0dXJuIHsgc3RhdHVzOiAnZmFpbCcsIHJlc3VsdDogW10gfVxuICByZXR1cm4gci5qc29uKClcbn1cblxuLy8gTG9hZCBtb2NrIHJldmlld3MgKGZhbGxiYWNrIGlmIEhvc3Rhd2F5IHJldHVybnMgbm90aGluZylcbmFzeW5jIGZ1bmN0aW9uIGxvYWRNb2NrKCk6IFByb21pc2U8YW55W10+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShhd2FpdCBmcy5yZWFkRmlsZShwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnLCAnbW9ja1Jldmlld3MuanNvbicpLCAndXRmLTgnKSlcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIFtdXG4gIH19XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXEudXJsKVxuICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldEFjY2Vzc1Rva2VuKClcbiAgY29uc3QgYXBpID0gYXdhaXQgZmV0Y2hIb3N0YXdheVJldmlld3ModG9rZW4sIHNlYXJjaFBhcmFtcykuY2F0Y2goKCkgPT4gKHsgc3RhdHVzOiAnZmFpbCcsIHJlc3VsdDogW10gfSkpXG4gIGNvbnN0IGhvc3Rhd2F5SXRlbXMgPSBBcnJheS5pc0FycmF5KGFwaT8ucmVzdWx0KSA/IGFwaS5yZXN1bHQgOiBbXVxuXG4gIGNvbnN0IG1vY2tlZCA9IGF3YWl0IGxvYWRNb2NrKClcbiAgY29uc3QgaXRlbXMgPSBob3N0YXdheUl0ZW1zLmxlbmd0aCA/IGhvc3Rhd2F5SXRlbXMgOiBtb2NrZWRcblxuICBjb25zdCBhcHByb3ZlZE1hcCA9IGF3YWl0IGxvYWRBcHByb3ZlZCgpXG5cbiAgbGV0IG5vcm1hbGl6ZWQ6IE5vcm1hbGl6ZWRSZXZpZXdbXSA9IGl0ZW1zLm1hcCgocjogSG9zdGF3YXlSYXdSZXZpZXcpID0+XG4gICAgbm9ybWFsaXplSG9zdGF3YXlSZXZpZXcociwgYXBwcm92ZWRNYXApXG4gIClcblxuICBjb25zdCBsaXN0aW5nSWRQYXJhbSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2xpc3RpbmdJZCcpXG4gIGNvbnN0IGNoYW5uZWwgPSBzZWFyY2hQYXJhbXMuZ2V0KCdjaGFubmVsJylcbiAgY29uc3QgdHlwZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3R5cGUnKVxuICBjb25zdCBzdGF0dXMgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzdGF0dXMnKVxuICBjb25zdCBmcm9tID0gc2VhcmNoUGFyYW1zLmdldCgnZnJvbScpID8gbmV3IERhdGUoc2VhcmNoUGFyYW1zLmdldCgnZnJvbScpISkgOiBudWxsXG4gIGNvbnN0IHRvID0gc2VhcmNoUGFyYW1zLmdldCgndG8nKSA/IG5ldyBEYXRlKHNlYXJjaFBhcmFtcy5nZXQoJ3RvJykhKSA6IG51bGxcbiAgY29uc3QgcSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3EnKT8udG9Mb3dlckNhc2UoKVxuXG4gIGlmIChsaXN0aW5nSWRQYXJhbSkgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQuZmlsdGVyKHIgPT4gU3RyaW5nKHIubGlzdGluZ0lkKSA9PT0gU3RyaW5nKGxpc3RpbmdJZFBhcmFtKSlcbiAgaWYgKGNoYW5uZWwpIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLmZpbHRlcihyID0+IHIuY2hhbm5lbC50b0xvd2VyQ2FzZSgpID09PSBjaGFubmVsLnRvTG93ZXJDYXNlKCkpXG4gIGlmICh0eXBlKSBub3JtYWxpemVkID0gbm9ybWFsaXplZC5maWx0ZXIociA9PiAoci5yZXZpZXdUeXBlIHx8ICcnKS50b0xvd2VyQ2FzZSgpID09PSB0eXBlLnRvTG93ZXJDYXNlKCkpXG4gIGlmIChzdGF0dXMpIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLmZpbHRlcihyID0+IChyLnN0YXR1cyB8fCAnJykudG9Mb3dlckNhc2UoKSA9PT0gc3RhdHVzLnRvTG93ZXJDYXNlKCkpXG4gIGlmIChmcm9tKSBub3JtYWxpemVkID0gbm9ybWFsaXplZC5maWx0ZXIociA9PiBuZXcgRGF0ZShyLnB1Ymxpc2hlZEF0KSA+PSBmcm9tKVxuICBpZiAodG8pIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLmZpbHRlcihyID0+IG5ldyBEYXRlKHIucHVibGlzaGVkQXQpIDw9IHRvISlcbiAgaWYgKHEpIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLmZpbHRlcihyID0+IChyLnRleHQgfHwgJycpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpXG5cbiAgY29uc3Qgd2l0aFN1bW1hcnkgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzdW1tYXJ5JykgPT09ICcxJ1xuICBjb25zdCBwYXlsb2FkID0gd2l0aFN1bW1hcnlcbiAgICA/IHsgcmV2aWV3czogbm9ybWFsaXplZCwgc3VtbWFyeTogYnVpbGRTdW1tYXJ5KG5vcm1hbGl6ZWQpIH1cbiAgICA6IHsgcmV2aWV3czogbm9ybWFsaXplZCB9XG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHBheWxvYWQsIHsgaGVhZGVyczogeyAnQ2FjaGUtQ29udHJvbCc6ICduby1zdG9yZScgfSB9KVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIm5vcm1hbGl6ZUhvc3Rhd2F5UmV2aWV3IiwiYnVpbGRTdW1tYXJ5IiwiUmVkaXMiLCJmcyIsInBhdGgiLCJyZWRpcyIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJVUFNUQVNIX1JFRElTX1JFU1RfVVJMIiwidG9rZW4iLCJVUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4iLCJsb2FkQXBwcm92ZWQiLCJrZXlzIiwiZW50cmllcyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJrZXkiLCJnZXQiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsIkhPU1RBV0FZX0JBU0UiLCJnZXRBY2Nlc3NUb2tlbiIsImlkIiwiSE9TVEFXQVlfQUNDT1VOVF9JRCIsIkhPU1RBV0FZX0FQSV9LRVkiLCJib2R5IiwiVVJMU2VhcmNoUGFyYW1zIiwiZ3JhbnRfdHlwZSIsImNsaWVudF9pZCIsImNsaWVudF9zZWNyZXQiLCJzY29wZSIsInIiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJvayIsIkVycm9yIiwic3RhdHVzIiwiaiIsImpzb24iLCJhY2Nlc3NfdG9rZW4iLCJmZXRjaEhvc3Rhd2F5UmV2aWV3cyIsInNlYXJjaFBhcmFtcyIsInJlc3VsdCIsIlVSTCIsImsiLCJoYXMiLCJzZXQiLCJ0b1N0cmluZyIsIkF1dGhvcml6YXRpb24iLCJsb2FkTW9jayIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlIiwiam9pbiIsImN3ZCIsIkdFVCIsInJlcSIsImFwaSIsImNhdGNoIiwiaG9zdGF3YXlJdGVtcyIsIkFycmF5IiwiaXNBcnJheSIsIm1vY2tlZCIsIml0ZW1zIiwibGVuZ3RoIiwiYXBwcm92ZWRNYXAiLCJub3JtYWxpemVkIiwibGlzdGluZ0lkUGFyYW0iLCJjaGFubmVsIiwidHlwZSIsImZyb20iLCJEYXRlIiwidG8iLCJxIiwidG9Mb3dlckNhc2UiLCJmaWx0ZXIiLCJTdHJpbmciLCJsaXN0aW5nSWQiLCJyZXZpZXdUeXBlIiwicHVibGlzaGVkQXQiLCJ0ZXh0IiwiaW5jbHVkZXMiLCJ3aXRoU3VtbWFyeSIsInBheWxvYWQiLCJyZXZpZXdzIiwic3VtbWFyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/reviews/hostaway/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/categories.ts":
/*!***************************!*\
  !*** ./lib/categories.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CATEGORIES: () => (/* binding */ CATEGORIES),\n/* harmony export */   CATEGORY_KEYWORDS: () => (/* binding */ CATEGORY_KEYWORDS)\n/* harmony export */ });\nconst CATEGORIES = [\n    \"Cleanliness\",\n    \"Communication\",\n    \"Check-in\",\n    \"Accuracy\",\n    \"Location\",\n    \"Value\",\n    \"Amenities\",\n    \"Noise\",\n    \"WiFi\",\n    \"Comfort\",\n    \"Parking\",\n    \"Host\",\n    \"Heating\",\n    \"AC\",\n    \"Safety\"\n];\n// very light-weight keyword hints; tune as needed\nconst CATEGORY_KEYWORDS = {\n    Cleanliness: [\n        \"clean\",\n        \"spotless\",\n        \"dirty\",\n        \"dust\",\n        \"smell\",\n        \"stain\"\n    ],\n    Communication: [\n        \"communication\",\n        \"responsive\",\n        \"respond\",\n        \"quick\",\n        \"host\"\n    ],\n    \"Check-in\": [\n        \"check-in\",\n        \"checkin\",\n        \"self check\",\n        \"lockbox\",\n        \"code\"\n    ],\n    Accuracy: [\n        \"accurate\",\n        \"exactly as\",\n        \"as described\",\n        \"misleading\"\n    ],\n    Location: [\n        \"location\",\n        \"area\",\n        \"neighborhood\",\n        \"central\",\n        \"walk\",\n        \"metro\"\n    ],\n    Value: [\n        \"value\",\n        \"price\",\n        \"worth\"\n    ],\n    Amenities: [\n        \"amenities\",\n        \"kitchen\",\n        \"coffee\",\n        \"towels\",\n        \"hairdryer\",\n        \"washer\",\n        \"dryer\"\n    ],\n    Noise: [\n        \"noise\",\n        \"noisy\",\n        \"quiet\",\n        \"street\",\n        \"traffic\"\n    ],\n    WiFi: [\n        \"wifi\",\n        \"wi-fi\",\n        \"internet\",\n        \"speed\"\n    ],\n    Comfort: [\n        \"bed\",\n        \"comfortable\",\n        \"mattress\",\n        \"pillow\",\n        \"sofa\",\n        \"shower\"\n    ],\n    Parking: [\n        \"parking\",\n        \"garage\",\n        \"park\"\n    ],\n    Host: [\n        \"host\",\n        \"helpful\",\n        \"friendly\",\n        \"rude\"\n    ],\n    Heating: [\n        \"heating\",\n        \"heater\",\n        \"radiator\"\n    ],\n    AC: [\n        \"ac\",\n        \"air conditioning\",\n        \"aircon\"\n    ],\n    Safety: [\n        \"safe\",\n        \"unsafe\",\n        \"security\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2F0ZWdvcmllcy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLE1BQU1BLGFBQWE7SUFDeEI7SUFBYztJQUFnQjtJQUFXO0lBQVc7SUFBVztJQUMvRDtJQUFZO0lBQVE7SUFBTztJQUFVO0lBQVU7SUFBTztJQUFVO0lBQUs7Q0FDdEUsQ0FBUztBQUVWLGtEQUFrRDtBQUMzQyxNQUFNQyxvQkFBOEM7SUFDekRDLGFBQWE7UUFBQztRQUFTO1FBQVk7UUFBUztRQUFRO1FBQVM7S0FBUTtJQUNyRUMsZUFBZTtRQUFDO1FBQWlCO1FBQWM7UUFBVztRQUFTO0tBQU87SUFDMUUsWUFBWTtRQUFDO1FBQVk7UUFBVztRQUFjO1FBQVc7S0FBTztJQUNwRUMsVUFBVTtRQUFDO1FBQVk7UUFBYztRQUFnQjtLQUFhO0lBQ2xFQyxVQUFVO1FBQUM7UUFBWTtRQUFRO1FBQWdCO1FBQVc7UUFBUTtLQUFRO0lBQzFFQyxPQUFPO1FBQUM7UUFBUztRQUFTO0tBQVE7SUFDbENDLFdBQVc7UUFBQztRQUFhO1FBQVc7UUFBVTtRQUFVO1FBQVk7UUFBUztLQUFRO0lBQ3JGQyxPQUFPO1FBQUM7UUFBUztRQUFTO1FBQVM7UUFBVTtLQUFVO0lBQ3ZEQyxNQUFNO1FBQUM7UUFBUTtRQUFTO1FBQVk7S0FBUTtJQUM1Q0MsU0FBUztRQUFDO1FBQU87UUFBZTtRQUFZO1FBQVU7UUFBTztLQUFTO0lBQ3RFQyxTQUFTO1FBQUM7UUFBVztRQUFVO0tBQU87SUFDdENDLE1BQU07UUFBQztRQUFRO1FBQVc7UUFBVztLQUFPO0lBQzVDQyxTQUFTO1FBQUM7UUFBVztRQUFVO0tBQVc7SUFDMUNDLElBQUk7UUFBQztRQUFNO1FBQW9CO0tBQVM7SUFDeENDLFFBQVE7UUFBQztRQUFRO1FBQVU7S0FBVztBQUN4QyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxleC1saXZpbmctcmV2aWV3cy1kYXNoYm9hcmQvLi9saWIvY2F0ZWdvcmllcy50cz8yMWIzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBDQVRFR09SSUVTID0gW1xuICAnQ2xlYW5saW5lc3MnLCdDb21tdW5pY2F0aW9uJywnQ2hlY2staW4nLCdBY2N1cmFjeScsJ0xvY2F0aW9uJywnVmFsdWUnLFxuICAnQW1lbml0aWVzJywnTm9pc2UnLCdXaUZpJywnQ29tZm9ydCcsJ1BhcmtpbmcnLCdIb3N0JywnSGVhdGluZycsJ0FDJywnU2FmZXR5J1xuXSBhcyBjb25zdFxuXG4vLyB2ZXJ5IGxpZ2h0LXdlaWdodCBrZXl3b3JkIGhpbnRzOyB0dW5lIGFzIG5lZWRlZFxuZXhwb3J0IGNvbnN0IENBVEVHT1JZX0tFWVdPUkRTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gIENsZWFubGluZXNzOiBbJ2NsZWFuJywgJ3Nwb3RsZXNzJywgJ2RpcnR5JywgJ2R1c3QnLCAnc21lbGwnLCAnc3RhaW4nXSxcbiAgQ29tbXVuaWNhdGlvbjogWydjb21tdW5pY2F0aW9uJywgJ3Jlc3BvbnNpdmUnLCAncmVzcG9uZCcsICdxdWljaycsICdob3N0J10sXG4gICdDaGVjay1pbic6IFsnY2hlY2staW4nLCAnY2hlY2tpbicsICdzZWxmIGNoZWNrJywgJ2xvY2tib3gnLCAnY29kZSddLFxuICBBY2N1cmFjeTogWydhY2N1cmF0ZScsICdleGFjdGx5IGFzJywgJ2FzIGRlc2NyaWJlZCcsICdtaXNsZWFkaW5nJ10sXG4gIExvY2F0aW9uOiBbJ2xvY2F0aW9uJywgJ2FyZWEnLCAnbmVpZ2hib3Job29kJywgJ2NlbnRyYWwnLCAnd2FsaycsICdtZXRybyddLFxuICBWYWx1ZTogWyd2YWx1ZScsICdwcmljZScsICd3b3J0aCddLFxuICBBbWVuaXRpZXM6IFsnYW1lbml0aWVzJywgJ2tpdGNoZW4nLCAnY29mZmVlJywgJ3Rvd2VscycsICdoYWlyZHJ5ZXInLCd3YXNoZXInLCdkcnllciddLFxuICBOb2lzZTogWydub2lzZScsICdub2lzeScsICdxdWlldCcsICdzdHJlZXQnLCAndHJhZmZpYyddLFxuICBXaUZpOiBbJ3dpZmknLCAnd2ktZmknLCAnaW50ZXJuZXQnLCAnc3BlZWQnXSxcbiAgQ29tZm9ydDogWydiZWQnLCAnY29tZm9ydGFibGUnLCAnbWF0dHJlc3MnLCAncGlsbG93JywgJ3NvZmEnLCdzaG93ZXInXSxcbiAgUGFya2luZzogWydwYXJraW5nJywgJ2dhcmFnZScsICdwYXJrJ10sXG4gIEhvc3Q6IFsnaG9zdCcsICdoZWxwZnVsJywgJ2ZyaWVuZGx5JywncnVkZSddLFxuICBIZWF0aW5nOiBbJ2hlYXRpbmcnLCAnaGVhdGVyJywgJ3JhZGlhdG9yJ10sXG4gIEFDOiBbJ2FjJywgJ2FpciBjb25kaXRpb25pbmcnLCAnYWlyY29uJ10sXG4gIFNhZmV0eTogWydzYWZlJywgJ3Vuc2FmZScsICdzZWN1cml0eSddXG59XG4iXSwibmFtZXMiOlsiQ0FURUdPUklFUyIsIkNBVEVHT1JZX0tFWVdPUkRTIiwiQ2xlYW5saW5lc3MiLCJDb21tdW5pY2F0aW9uIiwiQWNjdXJhY3kiLCJMb2NhdGlvbiIsIlZhbHVlIiwiQW1lbml0aWVzIiwiTm9pc2UiLCJXaUZpIiwiQ29tZm9ydCIsIlBhcmtpbmciLCJIb3N0IiwiSGVhdGluZyIsIkFDIiwiU2FmZXR5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/categories.ts\n");

/***/ }),

/***/ "(rsc)/./lib/channels.ts":
/*!*************************!*\
  !*** ./lib/channels.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CHANNELS: () => (/* binding */ CHANNELS),\n/* harmony export */   channelName: () => (/* binding */ channelName)\n/* harmony export */ });\nconst CHANNELS = {\n    2005: \"Airbnb\",\n    2001: \"Booking.com\",\n    2010: \"Vrbo\",\n    2007: \"Hostaway\",\n    2002: \"Expedia\",\n    2013: \"Marriott\"\n};\nconst channelName = (id)=>{\n    if (!id && id !== 0) return \"Unknown\";\n    return CHANNELS[id] || `Channel ${id}`;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2hhbm5lbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTyxNQUFNQSxXQUFtQztJQUM5QyxNQUFNO0lBQ04sTUFBTTtJQUNOLE1BQU07SUFDTixNQUFNO0lBQ04sTUFBTTtJQUNOLE1BQU07QUFDUixFQUFDO0FBRU0sTUFBTUMsY0FBYyxDQUFDQztJQUMxQixJQUFJLENBQUNBLE1BQU1BLE9BQU8sR0FBRyxPQUFPO0lBQzVCLE9BQU9GLFFBQVEsQ0FBQ0UsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFQSxHQUFHLENBQUM7QUFDeEMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsZXgtbGl2aW5nLXJldmlld3MtZGFzaGJvYXJkLy4vbGliL2NoYW5uZWxzLnRzPzc2YmMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IENIQU5ORUxTOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmc+ID0ge1xuICAyMDA1OiAnQWlyYm5iJyxcbiAgMjAwMTogJ0Jvb2tpbmcuY29tJyxcbiAgMjAxMDogJ1ZyYm8nLFxuICAyMDA3OiAnSG9zdGF3YXknLFxuICAyMDAyOiAnRXhwZWRpYScsXG4gIDIwMTM6ICdNYXJyaW90dCdcbn1cblxuZXhwb3J0IGNvbnN0IGNoYW5uZWxOYW1lID0gKGlkPzogbnVtYmVyIHwgbnVsbCkgPT4ge1xuICBpZiAoIWlkICYmIGlkICE9PSAwKSByZXR1cm4gJ1Vua25vd24nXG4gIHJldHVybiBDSEFOTkVMU1tpZF0gfHwgYENoYW5uZWwgJHtpZH1gXG59XG4iXSwibmFtZXMiOlsiQ0hBTk5FTFMiLCJjaGFubmVsTmFtZSIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/channels.ts\n");

/***/ }),

/***/ "(rsc)/./lib/normalize.ts":
/*!**************************!*\
  !*** ./lib/normalize.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildSummary: () => (/* binding */ buildSummary),\n/* harmony export */   normalizeGoogleReview: () => (/* binding */ normalizeGoogleReview),\n/* harmony export */   normalizeHostawayReview: () => (/* binding */ normalizeHostawayReview)\n/* harmony export */ });\n/* harmony import */ var _channels__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./channels */ \"(rsc)/./lib/channels.ts\");\n/* harmony import */ var _sentiment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sentiment */ \"(rsc)/./lib/sentiment.ts\");\n/* harmony import */ var _categories__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./categories */ \"(rsc)/./lib/categories.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"(rsc)/./lib/utils.ts\");\n\n\n\n\nfunction normalizeHostawayReview(r, approvedMap) {\n    const text = (r.publicReview || r.privateFeedback || \"\").toString().trim();\n    const cats = extractCategories(text);\n    const s = (0,_sentiment__WEBPACK_IMPORTED_MODULE_1__.scoreSentiment)(text);\n    const id = `hostaway:${r.id}`;\n    return {\n        id,\n        source: \"hostaway\",\n        listingId: r.listingMapId,\n        listingName: r.listingName || `Listing ${r.listingMapId}`,\n        channel: (0,_channels__WEBPACK_IMPORTED_MODULE_0__.channelName)(r.channelId),\n        reviewType: r.type,\n        status: r.status,\n        rating: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.clampRating)(r.rating),\n        title: null,\n        text,\n        language: r.language || null,\n        publishedAt: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.toISO)(r.departureDate || r.arrivalDate),\n        author: r.guestName || null,\n        categories: cats,\n        sentiment: s,\n        approved: approvedMap[id] ?? false,\n        url: null\n    };\n}\n// Google Places (New) 'reviews' array normalization\nfunction normalizeGoogleReview(g, listingId, listingName, placeUrl, approvedMap = {}) {\n    const id = `google:${g.name || g.reviewId || g.createTime}`;\n    const text = g.text?.text || g.text || \"\";\n    const cats = extractCategories(text);\n    const s = (0,_sentiment__WEBPACK_IMPORTED_MODULE_1__.scoreSentiment)(text);\n    return {\n        id,\n        source: \"google\",\n        listingId,\n        listingName,\n        channel: \"Google\",\n        rating: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.clampRating)(g.rating),\n        title: null,\n        text,\n        language: g.originalText?.languageCode || g.languageCode || null,\n        publishedAt: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.toISO)(g.createTime || g.relativePublishTimeDescription),\n        author: g.authorAttribution?.displayName || null,\n        categories: cats,\n        sentiment: s,\n        approved: Boolean(approvedMap[id]),\n        url: g.authorAttribution?.uri || placeUrl || null\n    };\n}\nfunction buildSummary(reviews) {\n    const byListing = {};\n    for (const r of reviews){\n        const key = String(r.listingId);\n        if (!byListing[key]) {\n            byListing[key] = {\n                listingId: r.listingId,\n                listingName: r.listingName,\n                count: 0,\n                avgRating: null,\n                posPct: 0,\n                negPct: 0,\n                latest: null,\n                channels: {},\n                topIssues: []\n            };\n        }\n        const b = byListing[key];\n        b.count += 1;\n        if (r.rating != null) {\n            const sum = (b.avgRating || 0) * (b.count - 1) + r.rating;\n            b.avgRating = Math.round(sum / b.count * 100) / 100;\n        }\n        const dt = new Date(r.publishedAt).toISOString();\n        if (!b.latest || dt > b.latest) b.latest = dt;\n        b.channels[r.channel] = (b.channels[r.channel] || 0) + 1;\n    }\n    // Top issues per listing (simple: most frequent categories with negative sentiment)\n    for (const key of Object.keys(byListing)){\n        const catCounts = {};\n        const total = reviews.filter((r)=>String(r.listingId) === key).length;\n        let pos = 0, neg = 0;\n        for (const r of reviews.filter((r)=>String(r.listingId) === key)){\n            if (r.sentiment.label === \"positive\") pos++;\n            if (r.sentiment.label === \"negative\") neg++;\n            for (const c of r.categories)catCounts[c] = (catCounts[c] || 0) + 1;\n        }\n        byListing[key].posPct = total ? Math.round(pos / total * 100) : 0;\n        byListing[key].negPct = total ? Math.round(neg / total * 100) : 0;\n        byListing[key].topIssues = Object.entries(catCounts).sort((a, b)=>b[1] - a[1]).slice(0, 3).map(([category, count])=>({\n                category,\n                count\n            }));\n    }\n    const allRatings = reviews.map((r)=>r.rating).filter((n)=>n != null);\n    const overall = {\n        total: reviews.length,\n        avgRating: allRatings.length ? Math.round(allRatings.reduce((a, b)=>a + b, 0) / allRatings.length * 100) / 100 : null,\n        posPct: reviews.length ? Math.round(reviews.filter((r)=>r.sentiment.label === \"positive\").length / reviews.length * 100) : 0,\n        negPct: reviews.length ? Math.round(reviews.filter((r)=>r.sentiment.label === \"negative\").length / reviews.length * 100) : 0\n    };\n    return {\n        byListing,\n        overall\n    };\n}\nfunction extractCategories(text) {\n    const lc = (text || \"\").toLowerCase();\n    const cats = [];\n    for (const [cat, kws] of Object.entries(_categories__WEBPACK_IMPORTED_MODULE_2__.CATEGORY_KEYWORDS)){\n        if (kws.some((k)=>lc.includes(k))) cats.push(cat);\n    }\n    return Array.from(new Set(cats));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBR1YsS0FBS0MsS0FBSyxDQUFDLFFBQVNRLE1BQU0sQ0FBQ3BFLENBQUFBLElBQUtBLEVBQUU2QixTQUFTLENBQUMyQyxLQUFLLEtBQUcsWUFBWUgsTUFBTSxHQUFHdkIsUUFBUXVCLE1BQU0sR0FBSSxPQUFPO0lBQzdIO0lBRUEsT0FBTztRQUFFdEI7UUFBV21DO0lBQVE7QUFDOUI7QUFFQSxTQUFTMUUsa0JBQWtCTixJQUFZO0lBQ3JDLE1BQU1rRixLQUFLLENBQUNsRixRQUFRLEVBQUMsRUFBR21GLFdBQVc7SUFDbkMsTUFBTTlFLE9BQWlCLEVBQUU7SUFDekIsS0FBSyxNQUFNLENBQUMrRSxLQUFLQyxJQUFJLElBQUl2QixPQUFPVSxPQUFPLENBQUM5RSwwREFBaUJBLEVBQUc7UUFDMUQsSUFBSTJGLElBQUlDLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0wsR0FBR00sUUFBUSxDQUFDRCxLQUFLbEYsS0FBS29GLElBQUksQ0FBQ0w7SUFDL0M7SUFDQSxPQUFPTSxNQUFNQyxJQUFJLENBQUMsSUFBSUMsSUFBSXZGO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxleC1saXZpbmctcmV2aWV3cy1kYXNoYm9hcmQvLi9saWIvbm9ybWFsaXplLnRzPzY1MzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2hhbm5lbE5hbWUgfSBmcm9tICcuL2NoYW5uZWxzJ1xuaW1wb3J0IHsgc2NvcmVTZW50aW1lbnQgfSBmcm9tICcuL3NlbnRpbWVudCdcbmltcG9ydCB7IENBVEVHT1JZX0tFWVdPUkRTIH0gZnJvbSAnLi9jYXRlZ29yaWVzJ1xuaW1wb3J0IHsgdG9JU08sIGNsYW1wUmF0aW5nIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB0eXBlIHsgTm9ybWFsaXplZFJldmlldywgUmV2aWV3U3VtbWFyeSB9IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVIb3N0YXdheVJldmlldyhyOiBhbnksIGFwcHJvdmVkTWFwOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPik6IE5vcm1hbGl6ZWRSZXZpZXcge1xuICBjb25zdCB0ZXh0ID0gKHIucHVibGljUmV2aWV3IHx8IHIucHJpdmF0ZUZlZWRiYWNrIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKVxuICBjb25zdCBjYXRzID0gZXh0cmFjdENhdGVnb3JpZXModGV4dClcbiAgY29uc3QgcyA9IHNjb3JlU2VudGltZW50KHRleHQpXG4gIGNvbnN0IGlkID0gYGhvc3Rhd2F5OiR7ci5pZH1gXG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgc291cmNlOiAnaG9zdGF3YXknLFxuICAgIGxpc3RpbmdJZDogci5saXN0aW5nTWFwSWQsXG4gICAgbGlzdGluZ05hbWU6IHIubGlzdGluZ05hbWUgfHwgYExpc3RpbmcgJHtyLmxpc3RpbmdNYXBJZH1gLFxuICAgIGNoYW5uZWw6IGNoYW5uZWxOYW1lKHIuY2hhbm5lbElkKSxcbiAgICByZXZpZXdUeXBlOiByLnR5cGUsXG4gICAgc3RhdHVzOiByLnN0YXR1cyxcbiAgICByYXRpbmc6IGNsYW1wUmF0aW5nKHIucmF0aW5nKSxcbiAgICB0aXRsZTogbnVsbCxcbiAgICB0ZXh0LFxuICAgIGxhbmd1YWdlOiByLmxhbmd1YWdlIHx8IG51bGwsXG4gICAgcHVibGlzaGVkQXQ6IHRvSVNPKHIuZGVwYXJ0dXJlRGF0ZSB8fCByLmFycml2YWxEYXRlKSxcbiAgICBhdXRob3I6IHIuZ3Vlc3ROYW1lIHx8IG51bGwsXG4gICAgY2F0ZWdvcmllczogY2F0cyxcbiAgICBzZW50aW1lbnQ6IHMsXG4gICAgYXBwcm92ZWQ6IGFwcHJvdmVkTWFwW2lkXSA/PyBmYWxzZSwgICAgICAgIFxuICAgIHVybDogbnVsbFxuICB9XG59XG5cbi8vIEdvb2dsZSBQbGFjZXMgKE5ldykgJ3Jldmlld3MnIGFycmF5IG5vcm1hbGl6YXRpb25cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVHb29nbGVSZXZpZXcoZzogYW55LCBsaXN0aW5nSWQ6IG51bWJlciwgbGlzdGluZ05hbWU6IHN0cmluZywgcGxhY2VVcmw/OiBzdHJpbmcsIGFwcHJvdmVkTWFwOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHt9KTogTm9ybWFsaXplZFJldmlldyB7XG4gIGNvbnN0IGlkID0gYGdvb2dsZToke2cubmFtZSB8fCBnLnJldmlld0lkIHx8IGcuY3JlYXRlVGltZX1gXG4gIGNvbnN0IHRleHQgPSBnLnRleHQ/LnRleHQgfHwgZy50ZXh0IHx8ICcnXG4gIGNvbnN0IGNhdHMgPSBleHRyYWN0Q2F0ZWdvcmllcyh0ZXh0KVxuICBjb25zdCBzID0gc2NvcmVTZW50aW1lbnQodGV4dClcbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICBzb3VyY2U6ICdnb29nbGUnLFxuICAgIGxpc3RpbmdJZCxcbiAgICBsaXN0aW5nTmFtZSxcbiAgICBjaGFubmVsOiAnR29vZ2xlJyxcbiAgICByYXRpbmc6IGNsYW1wUmF0aW5nKGcucmF0aW5nKSxcbiAgICB0aXRsZTogbnVsbCxcbiAgICB0ZXh0LFxuICAgIGxhbmd1YWdlOiBnLm9yaWdpbmFsVGV4dD8ubGFuZ3VhZ2VDb2RlIHx8IGcubGFuZ3VhZ2VDb2RlIHx8IG51bGwsXG4gICAgcHVibGlzaGVkQXQ6IHRvSVNPKGcuY3JlYXRlVGltZSB8fCBnLnJlbGF0aXZlUHVibGlzaFRpbWVEZXNjcmlwdGlvbiksXG4gICAgYXV0aG9yOiBnLmF1dGhvckF0dHJpYnV0aW9uPy5kaXNwbGF5TmFtZSB8fCBudWxsLFxuICAgIGNhdGVnb3JpZXM6IGNhdHMsXG4gICAgc2VudGltZW50OiBzLFxuICAgIGFwcHJvdmVkOiBCb29sZWFuKGFwcHJvdmVkTWFwW2lkXSksXG4gICAgdXJsOiBnLmF1dGhvckF0dHJpYnV0aW9uPy51cmkgfHwgcGxhY2VVcmwgfHwgbnVsbFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFN1bW1hcnkocmV2aWV3czogTm9ybWFsaXplZFJldmlld1tdKTogUmV2aWV3U3VtbWFyeSB7XG4gIGNvbnN0IGJ5TGlzdGluZzogUmV2aWV3U3VtbWFyeVsnYnlMaXN0aW5nJ10gPSB7fVxuICBmb3IgKGNvbnN0IHIgb2YgcmV2aWV3cykge1xuICAgIGNvbnN0IGtleSA9IFN0cmluZyhyLmxpc3RpbmdJZClcbiAgICBpZiAoIWJ5TGlzdGluZ1trZXldKSB7XG4gICAgICBieUxpc3Rpbmdba2V5XSA9IHtcbiAgICAgICAgbGlzdGluZ0lkOiByLmxpc3RpbmdJZCxcbiAgICAgICAgbGlzdGluZ05hbWU6IHIubGlzdGluZ05hbWUsXG4gICAgICAgIGNvdW50OiAwLFxuICAgICAgICBhdmdSYXRpbmc6IG51bGwsXG4gICAgICAgIHBvc1BjdDogMCxcbiAgICAgICAgbmVnUGN0OiAwLFxuICAgICAgICBsYXRlc3Q6IG51bGwsXG4gICAgICAgIGNoYW5uZWxzOiB7fSxcbiAgICAgICAgdG9wSXNzdWVzOiBbXVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBiID0gYnlMaXN0aW5nW2tleV1cbiAgICBiLmNvdW50ICs9IDFcbiAgICBpZiAoci5yYXRpbmcgIT0gbnVsbCkge1xuICAgICAgY29uc3Qgc3VtID0gKGIuYXZnUmF0aW5nIHx8IDApICogKGIuY291bnQgLSAxKSArIHIucmF0aW5nXG4gICAgICBiLmF2Z1JhdGluZyA9IE1hdGgucm91bmQoKHN1bSAvIGIuY291bnQpICogMTAwKSAvIDEwMFxuICAgIH1cbiAgICBjb25zdCBkdCA9IG5ldyBEYXRlKHIucHVibGlzaGVkQXQpLnRvSVNPU3RyaW5nKClcbiAgICBpZiAoIWIubGF0ZXN0IHx8IGR0ID4gYi5sYXRlc3QpIGIubGF0ZXN0ID0gZHRcbiAgICBiLmNoYW5uZWxzW3IuY2hhbm5lbF0gPSAoYi5jaGFubmVsc1tyLmNoYW5uZWxdIHx8IDApICsgMVxuICB9XG5cbiAgLy8gVG9wIGlzc3VlcyBwZXIgbGlzdGluZyAoc2ltcGxlOiBtb3N0IGZyZXF1ZW50IGNhdGVnb3JpZXMgd2l0aCBuZWdhdGl2ZSBzZW50aW1lbnQpXG4gIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGJ5TGlzdGluZykpIHtcbiAgICBjb25zdCBjYXRDb3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fVxuICAgIGNvbnN0IHRvdGFsID0gcmV2aWV3cy5maWx0ZXIociA9PiBTdHJpbmcoci5saXN0aW5nSWQpID09PSBrZXkpLmxlbmd0aFxuICAgIGxldCBwb3MgPSAwLCBuZWcgPSAwXG4gICAgZm9yIChjb25zdCByIG9mIHJldmlld3MuZmlsdGVyKHIgPT4gU3RyaW5nKHIubGlzdGluZ0lkKSA9PT0ga2V5KSkge1xuICAgICAgaWYgKHIuc2VudGltZW50LmxhYmVsID09PSAncG9zaXRpdmUnKSBwb3MrK1xuICAgICAgaWYgKHIuc2VudGltZW50LmxhYmVsID09PSAnbmVnYXRpdmUnKSBuZWcrK1xuICAgICAgZm9yIChjb25zdCBjIG9mIHIuY2F0ZWdvcmllcykgY2F0Q291bnRzW2NdID0gKGNhdENvdW50c1tjXSB8fCAwKSArIDFcbiAgICB9XG4gICAgYnlMaXN0aW5nW2tleV0ucG9zUGN0ID0gdG90YWwgPyBNYXRoLnJvdW5kKChwb3MgLyB0b3RhbCkgKiAxMDApIDogMFxuICAgIGJ5TGlzdGluZ1trZXldLm5lZ1BjdCA9IHRvdGFsID8gTWF0aC5yb3VuZCgobmVnIC8gdG90YWwpICogMTAwKSA6IDBcbiAgICBieUxpc3Rpbmdba2V5XS50b3BJc3N1ZXMgPSBPYmplY3QuZW50cmllcyhjYXRDb3VudHMpXG4gICAgICAuc29ydCgoYSxiKSA9PiBiWzFdLWFbMV0pXG4gICAgICAuc2xpY2UoMCwgMylcbiAgICAgIC5tYXAoKFtjYXRlZ29yeSwgY291bnRdKSA9PiAoeyBjYXRlZ29yeSwgY291bnQgfSkpXG4gIH1cblxuICBjb25zdCBhbGxSYXRpbmdzID0gcmV2aWV3cy5tYXAociA9PiByLnJhdGluZykuZmlsdGVyKChuKTogbiBpcyBudW1iZXIgPT4gbiAhPSBudWxsKVxuICBjb25zdCBvdmVyYWxsID0ge1xuICAgIHRvdGFsOiByZXZpZXdzLmxlbmd0aCxcbiAgICBhdmdSYXRpbmc6IGFsbFJhdGluZ3MubGVuZ3RoID8gTWF0aC5yb3VuZCgoYWxsUmF0aW5ncy5yZWR1Y2UoKGEsYik9PmErYiwwKS9hbGxSYXRpbmdzLmxlbmd0aCkqMTAwKS8xMDAgOiBudWxsLFxuICAgIHBvc1BjdDogcmV2aWV3cy5sZW5ndGggPyBNYXRoLnJvdW5kKChyZXZpZXdzLmZpbHRlcihyID0+IHIuc2VudGltZW50LmxhYmVsPT09J3Bvc2l0aXZlJykubGVuZ3RoIC8gcmV2aWV3cy5sZW5ndGgpICogMTAwKSA6IDAsXG4gICAgbmVnUGN0OiByZXZpZXdzLmxlbmd0aCA/IE1hdGgucm91bmQoKHJldmlld3MuZmlsdGVyKHIgPT4gci5zZW50aW1lbnQubGFiZWw9PT0nbmVnYXRpdmUnKS5sZW5ndGggLyByZXZpZXdzLmxlbmd0aCkgKiAxMDApIDogMFxuICB9XG5cbiAgcmV0dXJuIHsgYnlMaXN0aW5nLCBvdmVyYWxsIH1cbn1cblxuZnVuY3Rpb24gZXh0cmFjdENhdGVnb3JpZXModGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCBsYyA9ICh0ZXh0IHx8ICcnKS50b0xvd2VyQ2FzZSgpXG4gIGNvbnN0IGNhdHM6IHN0cmluZ1tdID0gW11cbiAgZm9yIChjb25zdCBbY2F0LCBrd3NdIG9mIE9iamVjdC5lbnRyaWVzKENBVEVHT1JZX0tFWVdPUkRTKSkge1xuICAgIGlmIChrd3Muc29tZShrID0+IGxjLmluY2x1ZGVzKGspKSkgY2F0cy5wdXNoKGNhdClcbiAgfVxuICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KGNhdHMpKVxufVxuXG4iXSwibmFtZXMiOlsiY2hhbm5lbE5hbWUiLCJzY29yZVNlbnRpbWVudCIsIkNBVEVHT1JZX0tFWVdPUkRTIiwidG9JU08iLCJjbGFtcFJhdGluZyIsIm5vcm1hbGl6ZUhvc3Rhd2F5UmV2aWV3IiwiciIsImFwcHJvdmVkTWFwIiwidGV4dCIsInB1YmxpY1JldmlldyIsInByaXZhdGVGZWVkYmFjayIsInRvU3RyaW5nIiwidHJpbSIsImNhdHMiLCJleHRyYWN0Q2F0ZWdvcmllcyIsInMiLCJpZCIsInNvdXJjZSIsImxpc3RpbmdJZCIsImxpc3RpbmdNYXBJZCIsImxpc3RpbmdOYW1lIiwiY2hhbm5lbCIsImNoYW5uZWxJZCIsInJldmlld1R5cGUiLCJ0eXBlIiwic3RhdHVzIiwicmF0aW5nIiwidGl0bGUiLCJsYW5ndWFnZSIsInB1Ymxpc2hlZEF0IiwiZGVwYXJ0dXJlRGF0ZSIsImFycml2YWxEYXRlIiwiYXV0aG9yIiwiZ3Vlc3ROYW1lIiwiY2F0ZWdvcmllcyIsInNlbnRpbWVudCIsImFwcHJvdmVkIiwidXJsIiwibm9ybWFsaXplR29vZ2xlUmV2aWV3IiwiZyIsInBsYWNlVXJsIiwibmFtZSIsInJldmlld0lkIiwiY3JlYXRlVGltZSIsIm9yaWdpbmFsVGV4dCIsImxhbmd1YWdlQ29kZSIsInJlbGF0aXZlUHVibGlzaFRpbWVEZXNjcmlwdGlvbiIsImF1dGhvckF0dHJpYnV0aW9uIiwiZGlzcGxheU5hbWUiLCJCb29sZWFuIiwidXJpIiwiYnVpbGRTdW1tYXJ5IiwicmV2aWV3cyIsImJ5TGlzdGluZyIsImtleSIsIlN0cmluZyIsImNvdW50IiwiYXZnUmF0aW5nIiwicG9zUGN0IiwibmVnUGN0IiwibGF0ZXN0IiwiY2hhbm5lbHMiLCJ0b3BJc3N1ZXMiLCJiIiwic3VtIiwiTWF0aCIsInJvdW5kIiwiZHQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJPYmplY3QiLCJrZXlzIiwiY2F0Q291bnRzIiwidG90YWwiLCJmaWx0ZXIiLCJsZW5ndGgiLCJwb3MiLCJuZWciLCJsYWJlbCIsImMiLCJlbnRyaWVzIiwic29ydCIsImEiLCJzbGljZSIsIm1hcCIsImNhdGVnb3J5IiwiYWxsUmF0aW5ncyIsIm4iLCJvdmVyYWxsIiwicmVkdWNlIiwibGMiLCJ0b0xvd2VyQ2FzZSIsImNhdCIsImt3cyIsInNvbWUiLCJrIiwiaW5jbHVkZXMiLCJwdXNoIiwiQXJyYXkiLCJmcm9tIiwiU2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/normalize.ts\n");

/***/ }),

/***/ "(rsc)/./lib/sentiment.ts":
/*!**************************!*\
  !*** ./lib/sentiment.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scoreSentiment: () => (/* binding */ scoreSentiment)\n/* harmony export */ });\n// Extremely lightweight sentiment approximation (lexicon based)\nconst POS = [\n    \"great\",\n    \"amazing\",\n    \"awesome\",\n    \"clean\",\n    \"spotless\",\n    \"friendly\",\n    \"helpful\",\n    \"perfect\",\n    \"excellent\",\n    \"fantastic\",\n    \"spacious\",\n    \"cozy\",\n    \"quiet\",\n    \"recommend\",\n    \"comfortable\",\n    \"love\"\n];\nconst NEG = [\n    \"bad\",\n    \"dirty\",\n    \"smell\",\n    \"noisy\",\n    \"rude\",\n    \"terrible\",\n    \"awful\",\n    \"disappoint\",\n    \"broken\",\n    \"unsafe\",\n    \"issue\",\n    \"problem\",\n    \"bug\",\n    \"delay\",\n    \"poor\",\n    \"worst\"\n];\nfunction scoreSentiment(text) {\n    const lc = (text || \"\").toLowerCase();\n    let s = 0;\n    for (const w of POS)if (lc.includes(w)) s += 1;\n    for (const w of NEG)if (lc.includes(w)) s -= 1;\n    const label = s > 0 ? \"positive\" : s < 0 ? \"negative\" : \"neutral\";\n    return {\n        score: s,\n        label\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2VudGltZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxnRUFBZ0U7QUFDaEUsTUFBTUEsTUFBTTtJQUFDO0lBQVE7SUFBVTtJQUFVO0lBQVE7SUFBVztJQUFXO0lBQVU7SUFBVTtJQUFZO0lBQVk7SUFBVztJQUFPO0lBQVE7SUFBWTtJQUFjO0NBQU87QUFDOUssTUFBTUMsTUFBTTtJQUFDO0lBQU07SUFBUTtJQUFRO0lBQVE7SUFBTztJQUFXO0lBQVE7SUFBYTtJQUFTO0lBQVM7SUFBUTtJQUFVO0lBQU07SUFBUTtJQUFPO0NBQVE7QUFFNUksU0FBU0MsZUFBZUMsSUFBWTtJQUN6QyxNQUFNQyxLQUFLLENBQUNELFFBQVEsRUFBQyxFQUFHRSxXQUFXO0lBQ25DLElBQUlDLElBQUk7SUFDUixLQUFLLE1BQU1DLEtBQUtQLElBQUssSUFBSUksR0FBR0ksUUFBUSxDQUFDRCxJQUFJRCxLQUFLO0lBQzlDLEtBQUssTUFBTUMsS0FBS04sSUFBSyxJQUFJRyxHQUFHSSxRQUFRLENBQUNELElBQUlELEtBQUs7SUFDOUMsTUFBTUcsUUFBUUgsSUFBSSxJQUFJLGFBQWFBLElBQUksSUFBSSxhQUFhO0lBQ3hELE9BQU87UUFBRUksT0FBT0o7UUFBR0c7SUFBTTtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsZXgtbGl2aW5nLXJldmlld3MtZGFzaGJvYXJkLy4vbGliL3NlbnRpbWVudC50cz9lYTU3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEV4dHJlbWVseSBsaWdodHdlaWdodCBzZW50aW1lbnQgYXBwcm94aW1hdGlvbiAobGV4aWNvbiBiYXNlZClcbmNvbnN0IFBPUyA9IFsnZ3JlYXQnLCdhbWF6aW5nJywnYXdlc29tZScsJ2NsZWFuJywnc3BvdGxlc3MnLCdmcmllbmRseScsJ2hlbHBmdWwnLCdwZXJmZWN0JywnZXhjZWxsZW50JywnZmFudGFzdGljJywnc3BhY2lvdXMnLCdjb3p5JywncXVpZXQnLCdyZWNvbW1lbmQnLCdjb21mb3J0YWJsZScsJ2xvdmUnXVxuY29uc3QgTkVHID0gWydiYWQnLCdkaXJ0eScsJ3NtZWxsJywnbm9pc3knLCdydWRlJywndGVycmlibGUnLCdhd2Z1bCcsJ2Rpc2FwcG9pbnQnLCdicm9rZW4nLCd1bnNhZmUnLCdpc3N1ZScsJ3Byb2JsZW0nLCdidWcnLCdkZWxheScsJ3Bvb3InLCd3b3JzdCddXG5cbmV4cG9ydCBmdW5jdGlvbiBzY29yZVNlbnRpbWVudCh0ZXh0OiBzdHJpbmcpIHtcbiAgY29uc3QgbGMgPSAodGV4dCB8fCAnJykudG9Mb3dlckNhc2UoKVxuICBsZXQgcyA9IDBcbiAgZm9yIChjb25zdCB3IG9mIFBPUykgaWYgKGxjLmluY2x1ZGVzKHcpKSBzICs9IDFcbiAgZm9yIChjb25zdCB3IG9mIE5FRykgaWYgKGxjLmluY2x1ZGVzKHcpKSBzIC09IDFcbiAgY29uc3QgbGFiZWwgPSBzID4gMCA/ICdwb3NpdGl2ZScgOiBzIDwgMCA/ICduZWdhdGl2ZScgOiAnbmV1dHJhbCdcbiAgcmV0dXJuIHsgc2NvcmU6IHMsIGxhYmVsIH0gYXMgY29uc3Rcbn1cbiJdLCJuYW1lcyI6WyJQT1MiLCJORUciLCJzY29yZVNlbnRpbWVudCIsInRleHQiLCJsYyIsInRvTG93ZXJDYXNlIiwicyIsInciLCJpbmNsdWRlcyIsImxhYmVsIiwic2NvcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/sentiment.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils.ts":
/*!**********************!*\
  !*** ./lib/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clampRating: () => (/* binding */ clampRating),\n/* harmony export */   cn: () => (/* binding */ cn),\n/* harmony export */   toISO: () => (/* binding */ toISO)\n/* harmony export */ });\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! clsx */ \"(rsc)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tailwind-merge */ \"(rsc)/./node_modules/tailwind-merge/dist/bundle-mjs.mjs\");\n\n\nfunction cn(...inputs) {\n    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.twMerge)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.clsx)(inputs));\n}\n// app/lib/utils.ts\n// Convert a date string to ISO (or fallback)\nfunction toISO(date) {\n    if (!date) return new Date().toISOString();\n    return (typeof date === \"string\" ? new Date(date) : date).toISOString();\n}\n// Clamp ratings between 1 and 5 stars\nfunction clampRating(rating) {\n    if (rating == null) return null;\n    return Math.max(1, Math.min(5, rating));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNEM7QUFDSjtBQUVqQyxTQUFTRSxHQUFHLEdBQUdDLE1BQW9CO0lBQ3hDLE9BQU9GLHVEQUFPQSxDQUFDRCwwQ0FBSUEsQ0FBQ0c7QUFDdEI7QUFFQSxtQkFBbUI7QUFFbkIsNkNBQTZDO0FBQ3RDLFNBQVNDLE1BQU1DLElBQXNDO0lBQzFELElBQUksQ0FBQ0EsTUFBTSxPQUFPLElBQUlDLE9BQU9DLFdBQVc7SUFDeEMsT0FBTyxDQUFDLE9BQU9GLFNBQVMsV0FBVyxJQUFJQyxLQUFLRCxRQUFRQSxJQUFHLEVBQUdFLFdBQVc7QUFDdkU7QUFFQSxzQ0FBc0M7QUFDL0IsU0FBU0MsWUFBWUMsTUFBaUM7SUFDM0QsSUFBSUEsVUFBVSxNQUFNLE9BQU87SUFDM0IsT0FBT0MsS0FBS0MsR0FBRyxDQUFDLEdBQUdELEtBQUtFLEdBQUcsQ0FBQyxHQUFHSDtBQUNqQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsZXgtbGl2aW5nLXJldmlld3MtZGFzaGJvYXJkLy4vbGliL3V0aWxzLnRzP2Y3NDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2xzeCwgdHlwZSBDbGFzc1ZhbHVlIH0gZnJvbSBcImNsc3hcIlxuaW1wb3J0IHsgdHdNZXJnZSB9IGZyb20gXCJ0YWlsd2luZC1tZXJnZVwiXG5cbmV4cG9ydCBmdW5jdGlvbiBjbiguLi5pbnB1dHM6IENsYXNzVmFsdWVbXSkge1xuICByZXR1cm4gdHdNZXJnZShjbHN4KGlucHV0cykpXG59XG5cbi8vIGFwcC9saWIvdXRpbHMudHNcblxuLy8gQ29udmVydCBhIGRhdGUgc3RyaW5nIHRvIElTTyAob3IgZmFsbGJhY2spXG5leHBvcnQgZnVuY3Rpb24gdG9JU08oZGF0ZTogc3RyaW5nIHwgRGF0ZSB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICBpZiAoIWRhdGUpIHJldHVybiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgcmV0dXJuICh0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycgPyBuZXcgRGF0ZShkYXRlKSA6IGRhdGUpLnRvSVNPU3RyaW5nKClcbn1cblxuLy8gQ2xhbXAgcmF0aW5ncyBiZXR3ZWVuIDEgYW5kIDUgc3RhcnNcbmV4cG9ydCBmdW5jdGlvbiBjbGFtcFJhdGluZyhyYXRpbmc6IG51bWJlciB8IG51bGwgfCB1bmRlZmluZWQpOiBudW1iZXIgfCBudWxsIHtcbiAgaWYgKHJhdGluZyA9PSBudWxsKSByZXR1cm4gbnVsbFxuICByZXR1cm4gTWF0aC5tYXgoMSwgTWF0aC5taW4oNSwgcmF0aW5nKSlcbn1cblxuIl0sIm5hbWVzIjpbImNsc3giLCJ0d01lcmdlIiwiY24iLCJpbnB1dHMiLCJ0b0lTTyIsImRhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJjbGFtcFJhdGluZyIsInJhdGluZyIsIk1hdGgiLCJtYXgiLCJtaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/tailwind-merge","vendor-chunks/clsx","vendor-chunks/@upstash","vendor-chunks/uncrypto"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freviews%2Fhostaway%2Froute&page=%2Fapi%2Freviews%2Fhostaway%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freviews%2Fhostaway%2Froute.ts&appDir=%2FUsers%2Fkvbiila%2FDownloads%2Fflex-living-reviews-dashboard%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkvbiila%2FDownloads%2Fflex-living-reviews-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();